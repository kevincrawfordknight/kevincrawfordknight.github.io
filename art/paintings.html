<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Paintings | Kevin Knight</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Header with Navigation -->
  <header>
    <nav class="navbar">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="https://kevincrawfordknight.github.io/vita/CV_Knight.pdf" target="_blank">CV</a></li>
        <li><a href="https://in-theory-originals.github.io/" target="_blank">Book</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
    <h1 class="page-title">Paintings</h1>
  </header>

  <!-- Main content -->
  <main>

    <!-- =========  FEATURED  ========= -->
    <section id="featured">
      <h2>Featured</h2>
      <div class="gallery">
        <!-- (unchanged — show all featured immediately) -->
        <!-- … your existing <figure class="painting" …> blocks … -->
      </div>
    </section>

    <!-- =========  AVAILABLE  ========= -->
    <section id="available">
      <h2>Available</h2>
      <div class="gallery">
        <!--  all “available” paintings (none removed)  -->
        <!--  keep every existing figure so the modal can access them -->
        <!-- … your existing <figure class="painting" …> blocks … -->
      </div>
    </section>

    <!-- =========  SOLD  ========= -->
    <section id="sold">
      <h2>Sold</h2>
      <div class="gallery">
        <!--  all “sold” paintings (none removed)  -->
        <!-- … your existing <figure class="painting" …> blocks … -->
      </div>
    </section>
  </main>

  <!-- =========  MODAL  ========= -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <img id="modalImage" src="" alt="">
      <div class="modal-caption" id="modalCaption"></div>
      <div class="modal-buttons">
        <button id="prevBtn">&#8592;</button>
        <button id="backBtn">Back</button>
        <button id="nextBtn">&#8594;</button>
      </div>
    </div>
  </div>

  <!-- =========  SCRIPTS  ========= -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {

    /* ---------- 1.  Progressive “load‑more” thumbnails ---------- */
    function setupLoadMore(sectionId) {
      const section   = document.getElementById(sectionId);
      const gallery   = section.querySelector('.gallery');
      const figs      = Array.from(gallery.querySelectorAll('figure.painting'));
      const BATCH     = 6;

      // hide everything after the first six
      figs.slice(BATCH).forEach(f => f.classList.add('hidden'));

      // create the “+” tile
      const moreFig = document.createElement('figure');
      moreFig.classList.add('load-more');
      moreFig.innerHTML = `
          <img src="more-image.jpg" alt="more">
          <figcaption><strong>more</strong></figcaption>`;
      gallery.appendChild(moreFig);

      function revealNextBatch() {
        const hidden = figs.filter(f => f.classList.contains('hidden')).slice(0, BATCH);
        hidden.forEach(f => f.classList.remove('hidden'));

        const stillHidden = figs.some(f => f.classList.contains('hidden'));
        if (!stillHidden) {
          moreFig.remove();              // no more batches
        } else {
          gallery.appendChild(moreFig);   // move “+” to end of current set
        }
      }
      moreFig.addEventListener('click', revealNextBatch);
    }

    setupLoadMore('available');
    setupLoadMore('sold');

    /* ---------- 2.  Modal viewer (unchanged) ---------- */
    const modal        = document.getElementById('modal');
    const modalImage   = document.getElementById('modalImage');
    const modalCaption = document.getElementById('modalCaption');
    const prevBtn      = document.getElementById('prevBtn');
    const nextBtn      = document.getElementById('nextBtn');
    const backBtn      = document.getElementById('backBtn');

    let currentCategory = '';
    let paintingsList   = [];
    let currentIndex    = 0;

    function updateModal() {
      const p = paintingsList[currentIndex];
      modalImage.src = p.dataset.full;
      modalCaption.innerHTML =
        `<strong>${p.dataset.title}</strong><br>${p.dataset.medium}, ${p.dataset.size}, ${p.dataset.year}`;
    }

    document.querySelectorAll('.painting').forEach(p => {
      p.addEventListener('click', () => {
        currentCategory = p.dataset.category;
        paintingsList   = Array.from(document.querySelectorAll(`.painting[data-category="${currentCategory}"]`));
        currentIndex    = paintingsList.indexOf(p);
        updateModal();
        modal.style.display = 'block';
      });
    });

    nextBtn.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % paintingsList.length;
      updateModal();
    });
    prevBtn.addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + paintingsList.length) % paintingsList.length;
      updateModal();
    });
    backBtn.addEventListener('click', () => modal.style.display = 'none');
    window.addEventListener('click', e => { if (e.target === modal) modal.style.display = 'none'; });
  });
  </script>

  <!-- Footer -->
  <footer><p>&copy; 2025 Kevin Knight</p></footer>
</body>
</html>
